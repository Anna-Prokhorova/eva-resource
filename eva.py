import os
import telebot
import datetime
import pytz

BOT_TOKEN = os.getenv("BOT_TOKEN")
CHAT_ID = os.getenv("CHAT_ID")

bot = telebot.TeleBot(BOT_TOKEN)

def send_message():
    moscow_tz = pytz.timezone('Europe/Moscow')

    resource_url = "https://crm-1c-resource.phoenixit.ru/"
    link_text = "[–†–µ—Å—É—Ä—Å]({})".format(resource_url)

    morning_message = f"""
    –° –Ω–æ–≤—ã–º –¥–Ω–µ–º, —Å–Ω–µ–∂–∏–Ω–∫–∞! ‚ùÑÔ∏è‚ú® –≠—Ç–æ –ï–≤–∞! –ù–∞–ø–æ–º–∏–Ω–∞—é, —á—Ç–æ –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–π–º—à–∏—Ç –∑–∞ –≤—á–µ—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å. üéÖüéÅ
    
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–π–¥–∏ –≤ {link_text} –∏ –≤–Ω–µ—Å–∏ –¥–∞–Ω–Ω—ã–µ. –≠—Ç–æ –Ω–µ –∑–∞–π–º–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –∞ –¥–ª—è –Ω–∞—Å —ç—Ç–æ –Ω–∞—Å—Ç–æ—è—â–∏–π –ø–æ–¥–∞—Ä–æ–∫! üéÅüí´
    
–ü—É—Å—Ç—å —ç—Ç–æ—Ç –¥–µ–Ω—å –±—É–¥–µ—Ç –≤–æ–ª—à–µ–±–Ω—ã–º –∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–º, –∫–∞–∫ —É —ç–ª—å—Ñ–æ–≤ –°–∞–Ω—Ç—ã! üéÑ‚ùÑÔ∏è
    """

    evening_message = f"""
    –î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä, —Å–Ω–µ–∂–Ω—ã–π –≥–µ—Ä–æ–π! üåü‚ú® –≠—Ç–æ —Å–Ω–æ–≤–∞ —è, –ï–≤–∞! –ù–∞–ø–æ–º–∏–Ω–∞—é, —á—Ç–æ –ø–æ—Ä–∞ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–π–º—à–∏—Ç –∑–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å. üéÅüéÑ
    
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–π–¥–∏ –≤ {link_text} –∏ –≤–Ω–µ—Å–∏ –¥–∞–Ω–Ω—ã–µ ‚Äî —ç—Ç–æ —Ç–≤–æ–π –º–∞–ª–µ–Ω—å–∫–∏–π –≤–∫–ª–∞–¥ –≤ –Ω–æ–≤–æ–≥–æ–¥–Ω–µ–µ –≤–æ–ª—à–µ–±—Å—Ç–≤–æ! üéÅüíñ

–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—Å–µ–≥–¥–∞ –Ω–∞ –≤—ã—Å–æ—Ç–µ ‚Äî —Ç—ã –Ω–∞—à–∞ –Ω–æ–≤–æ–≥–æ–¥–Ω—è—è –∑–≤–µ–∑–¥–∞! üåüüíñ
    """

    current_hour = datetime.datetime.now(moscow_tz).hour
    if current_hour >= 10 and current_hour < 17:
        bot.send_message(CHAT_ID, morning_message, parse_mode="Markdown")
    elif current_hour >= 17:
        bot.send_message(CHAT_ID, evening_message, parse_mode="Markdown")

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
if __name__ == "__main__":
    send_message()